<div class="tasks-container">
  <header class="tasks-header">
    <div class="header-content">
      <h1>Mis Tareas</h1>
      @if (currentUser()) {
        <div class="user-info">
          <span>Bienvenido, {{ currentUser()!.usuario }}</span>
          <button class="btn-logout" (click)="logout()">Cerrar SesiÃ³n</button>
        </div>
      }
    </div>
  </header>

  <div class="tasks-content">
    <div class="actions-bar">
      <button class="btn-primary" (click)="createTask()">
        + Nueva Tarea
      </button>
    </div>

    @if (loading()) {
      <div class="loading">Cargando tareas...</div>
    }

    @if (error()) {
      <div class="error-message" role="alert">
        {{ error() }}
      </div>
    }

    @if (!loading() && tasks().length === 0) {
      <div class="empty-state">
        <p>No tienes tareas todavÃ­a.</p>
        <p>Â¡Crea tu primera tarea para comenzar!</p>
      </div>
    }

    @if (tasks().length > 0) {
      <div class="tasks-grid">
        @for (task of tasks(); track task.id) {
          <div class="task-card" [class.completed]="task.completada">
            <div class="task-header">
              <h3>{{ task.titulo }}</h3>
              <div class="task-actions">
                <button 
                  class="btn-icon" 
                  (click)="editTask(task.id)"
                  title="Editar"
                >
                  âœï¸
                </button>
                <button 
                  class="btn-icon" 
                  (click)="deleteTask(task)"
                  title="Eliminar"
                >
                  ğŸ—‘ï¸
                </button>
              </div>
            </div>
            <p class="task-description">{{ task.descripcion }}</p>
            <div class="task-footer">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  [checked]="task.completada"
                  (change)="toggleTaskStatus(task)"
                />
                <span>{{ task.completada ? 'Completada' : 'Pendiente' }}</span>
              </label>
              <small class="task-date">{{ task.fechaCreacion | date:'short' }}</small>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
